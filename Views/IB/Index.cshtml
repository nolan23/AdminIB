@model IEnumerable<AdminIB.Models.Request>

@{
    ViewData["Title"] = "Data IB";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int no=0;
}

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        @ViewData["Title"]
    </h1>
</section>
<!-- Main content -->
<section class="content container-fluid">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Admins Table</h3>
                </div>
                <div class="box-body">
<table  class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>
                NO
            </th>
            <th>
                @Html.DisplayNameFor(model => model.NamaMahasiswa)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.NIMMahasiswa)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DepartureDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ReturnDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Reason)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Destination)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th>Aksi</th>
        </tr>
    </thead>
    <tbody id="table">

    </tbody>
    </table>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts{
<script>  
    function convertDate(date){
        var d = new Date(date)
        return d.toDateString()
    }
        $(document).ready(function () {  
            $.ajax({  
                type: "GET",  
                url: "https://localhost:5001/api/request",  
                contentType: "application/json; charset=utf-8",  
                dataType: "json",  
                success: function (data) {  
                    //alert(JSON.stringify(data));                  
                    
                    $.each(data, function (i, item) {  
                        var rows = "<tr>" +  
                            "<td" + i+"</td>"+
                            "<td>" + item.namaMahasiswa + "</td>" +
                            "<td>" + item.nimMahasiswa + "</td>" +    
                            "<td>" + convertDate(item.departureDate) + "</td>" +  
                             "<td>" + convertDate(item.returnDate) + "</td>" +
                             "<td>" + item.reason + "</td>" +
                             "<td>" + item.destination + "</td>" +  
                            "<td>" + item.status + "</td>" +  
                            "</tr>";  
                        $('#table').append(rows);  
                    }); //End of foreach Loop   
                    console.log(data);  
                }, //End of AJAX Success function  
      
                failure: function (data) {  
                    alert(data.responseText);  
                }, //End of AJAX failure function  
                error: function (data) {  
                    alert(data.responseText);  
                } //End of AJAX error function  
      
            });         
        });  
    </script>  
}

